{"ast":null,"code":"var __assign = this && this.__assign || function () {\n  __assign = Object.assign || function (t) {\n    for (var s, i = 1, n = arguments.length; i < n; i++) {\n      s = arguments[i];\n\n      for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n    }\n\n    return t;\n  };\n\n  return __assign.apply(this, arguments);\n};\n\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0) t[p[i]] = s[p[i]];\n  return t;\n};\n\nimport * as React from 'react';\nimport './fullscreen.css';\nvar clickEvent = isMobile() ? 'touchstart' : 'click';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case ImageGroup.actions.toggleExpand:\n      return __assign({}, state, {\n        currentFocusedImageIndex: action.payload.id,\n        isImageGroupExpanded: true,\n        shouldAnimate: false\n      });\n\n    case ImageGroup.actions.toggleExpandAnimate:\n      return __assign({}, state, {\n        currentFocusedImageIndex: action.payload.id,\n        isImageGroupExpanded: true,\n        shouldAnimate: true\n      });\n\n    case ImageGroup.actions.toggleCloseAnimate:\n      return __assign({}, state, {\n        currentFocusedImageIndex: -1,\n        isImageGroupExpanded: false,\n        shouldAnimate: true\n      });\n\n    default:\n      throw new Error(\"No case defined for type '\" + action.type + \"'.\");\n  }\n}\n\nexport function ImageGroup(_a) {\n  var _b = _a.transitionMs,\n      transitionMs = _b === void 0 ? 250 : _b,\n      children = _a.children;\n  var previousImageButton = React.useRef(null);\n  var nextImageButton = React.useRef(null);\n  var isAnimating = React.useRef(false);\n\n  var _c = React.useReducer(reducer, {\n    currentFocusedImageIndex: -1,\n    isImageGroupExpanded: false,\n    shouldAnimate: true\n  }),\n      state = _c[0],\n      dispatch = _c[1];\n\n  var _d = mapPropsToChildren(children, function (child, index) {\n    return React.cloneElement(child, {\n      'data-fullscreen-id': index,\n      isFocused: index === state.currentFocusedImageIndex,\n      shouldAnimate: state.shouldAnimate,\n      isImageGroupExpanded: state.isImageGroupExpanded,\n      transitionMs: transitionMs,\n      onClick: function () {\n        if (!isAnimating.current) {\n          if (state.shouldAnimate) {\n            isAnimating.current = true;\n            setTimeout(function () {\n              isAnimating.current = false;\n            }, transitionMs);\n          }\n\n          if (index === state.currentFocusedImageIndex) {\n            dispatch({\n              type: ImageGroup.actions.toggleCloseAnimate\n            });\n          } else {\n            dispatch({\n              type: state.currentFocusedImageIndex === -1 ? ImageGroup.actions.toggleExpandAnimate : ImageGroup.actions.toggleExpand,\n              payload: {\n                id: index\n              }\n            });\n          }\n        }\n      }\n    });\n  }),\n      updatedChildren = _d.updatedChildren,\n      numberOfImageChildren = _d.numberOfImageChildren;\n\n  React.useEffect(function () {\n    var clickListener = function (e) {\n      if (e.target.hasAttribute('data-fullscreen-group')) {\n        dispatch({\n          type: ImageGroup.actions.toggleCloseAnimate\n        });\n      }\n    };\n\n    var keyDownListener = function (e) {\n      if (state.currentFocusedImageIndex !== -1) {\n        if (e.key === 'Escape') {\n          dispatch({\n            type: ImageGroup.actions.toggleCloseAnimate\n          });\n        }\n\n        if (e.key === 'ArrowRight') {\n          if (nextImageButton.current) nextImageButton.current.focus();\n\n          if (state.currentFocusedImageIndex + 1 === numberOfImageChildren) {\n            dispatch({\n              type: ImageGroup.actions.toggleExpand,\n              payload: {\n                id: 0\n              }\n            });\n          } else {\n            dispatch({\n              type: ImageGroup.actions.toggleExpand,\n              payload: {\n                id: state.currentFocusedImageIndex + 1\n              }\n            });\n          }\n        }\n\n        if (e.key === 'ArrowLeft') {\n          if (previousImageButton.current) previousImageButton.current.focus();\n\n          if (state.currentFocusedImageIndex - 1 === -1) {\n            dispatch({\n              type: ImageGroup.actions.toggleExpand,\n              payload: {\n                id: numberOfImageChildren - 1\n              }\n            });\n          } else {\n            dispatch({\n              type: ImageGroup.actions.toggleExpand,\n              payload: {\n                id: state.currentFocusedImageIndex - 1\n              }\n            });\n          }\n        }\n      }\n    };\n\n    var resizeListener = function () {\n      dispatch({\n        type: ImageGroup.actions.toggleCloseAnimate\n      });\n      window.removeEventListener('resize', resizeListener);\n    };\n\n    var scrollAnimationId = -1;\n    var initialOffset = 0;\n\n    var scrollListener = function () {\n      scrollAnimationId = requestAnimationFrame(scrollListener);\n      var difference = Math.abs(initialOffset - window.pageYOffset);\n\n      if (difference > 80) {\n        dispatch({\n          type: ImageGroup.actions.toggleCloseAnimate\n        });\n      }\n    };\n\n    if (state.isImageGroupExpanded) {\n      window.addEventListener(clickEvent, clickListener);\n      window.addEventListener('keydown', keyDownListener);\n      window.addEventListener('resize', resizeListener);\n      initialOffset = window.pageYOffset;\n      scrollAnimationId = requestAnimationFrame(scrollListener);\n    } else {\n      window.removeEventListener(clickEvent, clickListener);\n      window.removeEventListener('keydown', keyDownListener);\n      window.removeEventListener('resize', resizeListener);\n      cancelAnimationFrame(scrollAnimationId);\n    }\n\n    return function () {\n      window.removeEventListener(clickEvent, clickListener);\n      window.removeEventListener('keydown', keyDownListener);\n      window.removeEventListener('resize', resizeListener);\n      cancelAnimationFrame(scrollAnimationId);\n    };\n  }, [state.isImageGroupExpanded, numberOfImageChildren, state.currentFocusedImageIndex]);\n  return React.createElement(\"div\", {\n    \"data-fullscreen-group\": \"\",\n    className: \"fullscreen-group\" + (state.isImageGroupExpanded ? ' fullscreen-group--expanded' : ''),\n    style: {\n      transition: \"opacity \" + transitionMs + \"ms ease\"\n    }\n  }, updatedChildren, state.currentFocusedImageIndex !== -1 && React.createElement(React.Fragment, null, React.createElement(\"button\", {\n    className: \"fullscreen-exit-btn\",\n    onClick: function () {\n      dispatch({\n        type: ImageGroup.actions.toggleCloseAnimate\n      });\n    },\n    \"aria-label\": \"Close fullscreen view\"\n  }, React.createElement(ExitIcon, null)), React.createElement(\"button\", {\n    ref: previousImageButton,\n    className: \"fullscreen-toggle toggle--left\",\n    onClick: function () {\n      dispatch({\n        type: ImageGroup.actions.toggleExpand,\n        payload: {\n          id: state.currentFocusedImageIndex - 1 !== -1 ? state.currentFocusedImageIndex - 1 : numberOfImageChildren - 1\n        }\n      });\n    },\n    tabIndex: state.isImageGroupExpanded ? 0 : -1,\n    \"aria-label\": \"Show previous photo\"\n  }, React.createElement(Arrow, {\n    direction: \"left\"\n  })), React.createElement(\"button\", {\n    ref: nextImageButton,\n    className: \"fullscreen-toggle toggle--right\",\n    onClick: function () {\n      dispatch({\n        type: ImageGroup.actions.toggleExpand,\n        payload: {\n          id: state.currentFocusedImageIndex + 1 !== numberOfImageChildren ? state.currentFocusedImageIndex + 1 : 0\n        }\n      });\n    },\n    tabIndex: state.isImageGroupExpanded ? 0 : -1,\n    \"aria-label\": \"Show next photo\"\n  }, React.createElement(Arrow, {\n    direction: \"right\"\n  }))));\n}\nImageGroup.actions = {\n  toggleExpand: 'TOGGLE_EXPAND',\n  toggleExpandAnimate: 'TOGGLE_EXPAND_ANIMATE',\n  toggleCloseAnimate: 'TOGGLE_CLOSE_ANIMATE'\n};\nexport function Image(_a) {\n  var src = _a.src,\n      alt = _a.alt,\n      style = _a.style,\n      props = __rest(_a, [\"src\", \"alt\", \"style\"]);\n\n  var onClick = props.onClick,\n      isFocused = props.isFocused,\n      shouldAnimate = props.shouldAnimate,\n      isImageGroupExpanded = props.isImageGroupExpanded,\n      transitionMs = props.transitionMs,\n      rest = __rest(props, [\"onClick\", \"isFocused\", \"shouldAnimate\", \"isImageGroupExpanded\", \"transitionMs\"]);\n\n  var scalingImage = React.useRef(null);\n  var wasPreviouslyFocused = React.useRef(false);\n  var initialRender = React.useRef(false);\n  React.useEffect(function () {\n    if (!initialRender.current) {\n      initialRender.current = true;\n      return;\n    }\n\n    var element = scalingImage.current;\n\n    if (element) {\n      if (isFocused) {\n        if (shouldAnimate) {\n          calculatePosition('open')(element, transitionMs);\n        } else {\n          calculatePosition('open')(element, 0);\n        }\n\n        wasPreviouslyFocused.current = true;\n      }\n\n      if (!isFocused && wasPreviouslyFocused.current) {\n        if (shouldAnimate) {\n          calculatePosition('close')(element, transitionMs);\n        } else {\n          calculatePosition('close')(element, 0);\n        }\n\n        wasPreviouslyFocused.current = false;\n      }\n    }\n  }, [isFocused, shouldAnimate, transitionMs]);\n  return React.createElement(\"div\", __assign({\n    className: \"fullscreen-container\"\n  }, rest), React.createElement(\"button\", {\n    className: \"fullscreen-btn\",\n    onClick: onClick,\n    tabIndex: isFocused || !isImageGroupExpanded ? 0 : -1\n  }, React.createElement(\"div\", {\n    className: \"fullscreen-image\"\n  }, React.createElement(\"img\", {\n    src: src,\n    alt: alt,\n    style: style\n  })), React.createElement(\"div\", {\n    ref: scalingImage,\n    className: \"fullscreen-image\"\n  }, React.createElement(\"img\", {\n    src: src,\n    alt: alt,\n    style: style\n  }))));\n}\nImage.displayName = 'Image';\n\nfunction mapPropsToChildren(children, fnToApplyToChild) {\n  var numberOfImageChildren = 0;\n\n  var recursiveMap = function (children) {\n    return React.Children.map(children, function (child) {\n      if (!React.isValidElement(child)) {\n        return child;\n      }\n\n      if (child.type.displayName === Image.displayName) {\n        child = fnToApplyToChild(child, numberOfImageChildren);\n        numberOfImageChildren++;\n        return child;\n      }\n\n      if (child.props.children) {\n        child = React.cloneElement(child, {\n          children: recursiveMap(child.props.children)\n        });\n      }\n\n      return child;\n    });\n  };\n\n  var updatedChildren = recursiveMap(children);\n  return {\n    updatedChildren: updatedChildren,\n    numberOfImageChildren: numberOfImageChildren\n  };\n}\n\nfunction calculatePosition(action) {\n  return function calculate(el, transitionMs) {\n    if (transitionMs === void 0) {\n      transitionMs = 0;\n    }\n\n    if (action === 'open') {\n      var innerWidth_1 = window.innerWidth,\n          innerHeight_1 = window.innerHeight;\n\n      var _a = el.getBoundingClientRect(),\n          height = _a.height,\n          width = _a.width,\n          top_1 = _a.top,\n          left = _a.left;\n\n      var scaleBy = innerWidth_1 < innerHeight_1 ? 'width' : 'height';\n      var scale = scaleBy === 'width' ? innerWidth_1 / width : innerHeight_1 / height;\n      var scaledImageWidth = width * scale;\n      var leftOfWhereScaledImageNeedsToBe = innerWidth_1 / 2 - scaledImageWidth / 2;\n      var leftOfWhereScaledImageIs = left - (scaledImageWidth - width) / 2;\n      var translateX = (leftOfWhereScaledImageNeedsToBe - leftOfWhereScaledImageIs) / scale;\n      var translateY = 0;\n\n      if (scaleBy === 'width') {\n        var scaledImageHeight = height * scale;\n        var centerOfScreen = innerHeight_1 / 2;\n        var topOfWhereImageShouldBe = centerOfScreen - scaledImageHeight / 2;\n        translateY = (topOfWhereImageShouldBe - top_1) / scale;\n      } else {\n        translateY = top_1 / scale * -1;\n      }\n\n      el.style.opacity = '1';\n      el.style.transform = \"scale(\" + scale + \") translate3d(\" + translateX + \"px, \" + translateY + \"px, 0px)\";\n      el.style.transition = \"transform \" + transitionMs + \"ms ease, opacity 0ms\";\n      el.style.transformOrigin = '50% 0';\n      el.style.zIndex = '9';\n      el.style.pointerEvents = 'initial';\n      el.style.touchAction = 'initial';\n      return;\n    }\n\n    if (action === 'close') {\n      el.style.opacity = '0';\n      el.style.transform = \"scale(1) translate3d(0px, 0px, 0px)\";\n      el.style.transition = \"transform \" + transitionMs + \"ms ease, opacity 0ms ease \" + transitionMs + \"ms, z-index 0ms ease \" + transitionMs + \"ms\";\n      el.style.transformOrigin = '50% 0';\n      el.style.zIndex = '-1';\n      el.style.pointerEvents = 'none';\n      el.style.touchAction = 'none';\n      return;\n    }\n  };\n}\n\nfunction isMobile() {\n  if (typeof document !== \"undefined\") {\n    return 'ontouchstart' in document.documentElement === true;\n  }\n\n  return false;\n}\n\nfunction Arrow(_a) {\n  var _b = _a.direction,\n      direction = _b === void 0 ? 'right' : _b;\n  return direction === 'right' ? React.createElement(\"svg\", {\n    width: \"20\",\n    height: \"34\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M18.3523845 18.5841646L4.77482194 32.343229c-.86369698.8756947-2.26403359.8756947-3.12731127 0-.86334756-.8749156-.86334756-2.2939446 0-3.1687894L13.6615574 16.9997698 1.6478601 4.82552501c-.86334757-.87526972-.86334757-2.29415709 0-3.16907271.86334755-.87526973 2.26361428-.87526973 3.12731126 0L18.3527339 15.4157292C18.7844077 15.8533995 19 16.4264076 19 16.999699c0 .5735747-.2160116 1.1470077-.6476155 1.5844656z\",\n    fillRule: \"nonzero\",\n    stroke: \"#000\",\n    fill: \"#fff\"\n  })) : React.createElement(\"svg\", {\n    width: \"20\",\n    height: \"34\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"path\", {\n    d: \"M1.6476155 18.5841646L15.22517806 32.343229c.86369698.8756947 2.26403359.8756947 3.12731127 0 .86334756-.8749156.86334756-2.2939446 0-3.1687894L6.3384426 16.9997698 18.3521399 4.82552501c.86334757-.87526972.86334757-2.29415709 0-3.16907271-.86334755-.87526973-2.26361428-.87526973-3.12731126 0L1.6472661 15.4157292C1.2155923 15.8533995 1 16.4264076 1 16.999699c0 .5735747.2160116 1.1470077.6476155 1.5844656z\",\n    fillRule: \"nonzero\",\n    stroke: \"#000\",\n    fill: \"#fff\"\n  }));\n}\n\nfunction ExitIcon() {\n  return React.createElement(\"svg\", {\n    width: \"20\",\n    height: \"20\",\n    xmlns: \"http://www.w3.org/2000/svg\"\n  }, React.createElement(\"g\", {\n    fill: \"#000\",\n    fillRule: \"nonzero\",\n    stroke: \"#000\"\n  }, React.createElement(\"path\", {\n    d: \"M18.6753571 2.08152486l-.6487597-.67476795c-.3578377-.37260221-.9393896-.37260221-1.2979286 0L9.98071429 8.33578453 3.21534416 1.30137569c-.35848052-.37254144-.93974026-.37254144-1.29792858 0l-.64875974.6746464c-.3581883.37272377-.3581883.97644752 0 1.34923205l8.055 8.37634806c.35818832.3729061.93898052.3729061 1.29757793 0l8.05412333-8.27102761c.359065-.37254144.359065-.97650829 0-1.34904973z\"\n  }), React.createElement(\"path\", {\n    d: \"M18.6753571 17.91847514l-.6487597.67476795c-.3578377.37260221-.9393896.37260221-1.2979286 0l-6.74795451-6.92902762-6.76537013 7.03440884c-.35848052.37254144-.93974026.37254144-1.29792858 0l-.64875974-.6746464c-.3581883-.37272377-.3581883-.97644752 0-1.34923205l8.055-8.37634806c.35818832-.3729061.93898052-.3729061 1.29757793 0l8.05412333 8.27102761c.359065.37254144.359065.97650829 0 1.34904973z\"\n  })));\n}","map":{"version":3,"sources":["../src/fullscreen.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\n            t[p[i]] = s[p[i]];\n    return t;\n};\nimport * as React from 'react';\nimport './fullscreen.css';\nvar clickEvent = isMobile() ? 'touchstart' : 'click';\nfunction reducer(state, action) {\n    switch (action.type) {\n        case ImageGroup.actions.toggleExpand:\n            return __assign({}, state, { currentFocusedImageIndex: action.payload.id, isImageGroupExpanded: true, shouldAnimate: false });\n        case ImageGroup.actions.toggleExpandAnimate:\n            return __assign({}, state, { currentFocusedImageIndex: action.payload.id, isImageGroupExpanded: true, shouldAnimate: true });\n        case ImageGroup.actions.toggleCloseAnimate:\n            return __assign({}, state, { currentFocusedImageIndex: -1, isImageGroupExpanded: false, shouldAnimate: true });\n        default:\n            throw new Error(\"No case defined for type '\" + action.type + \"'.\");\n    }\n}\nexport function ImageGroup(_a) {\n    var _b = _a.transitionMs, transitionMs = _b === void 0 ? 250 : _b, children = _a.children;\n    var previousImageButton = React.useRef(null);\n    var nextImageButton = React.useRef(null);\n    var isAnimating = React.useRef(false);\n    var _c = React.useReducer(reducer, {\n        currentFocusedImageIndex: -1,\n        isImageGroupExpanded: false,\n        shouldAnimate: true,\n    }), state = _c[0], dispatch = _c[1];\n    var _d = mapPropsToChildren(children, function (child, index) {\n        return React.cloneElement(child, {\n            'data-fullscreen-id': index,\n            isFocused: index === state.currentFocusedImageIndex,\n            shouldAnimate: state.shouldAnimate,\n            isImageGroupExpanded: state.isImageGroupExpanded,\n            transitionMs: transitionMs,\n            onClick: function () {\n                if (!isAnimating.current) {\n                    if (state.shouldAnimate) {\n                        isAnimating.current = true;\n                        setTimeout(function () {\n                            isAnimating.current = false;\n                        }, transitionMs);\n                    }\n                    if (index === state.currentFocusedImageIndex) {\n                        dispatch({\n                            type: ImageGroup.actions.toggleCloseAnimate,\n                        });\n                    }\n                    else {\n                        dispatch({\n                            type: state.currentFocusedImageIndex === -1\n                                ? ImageGroup.actions.toggleExpandAnimate\n                                : ImageGroup.actions.toggleExpand,\n                            payload: {\n                                id: index,\n                            },\n                        });\n                    }\n                }\n            },\n        });\n    }), updatedChildren = _d.updatedChildren, numberOfImageChildren = _d.numberOfImageChildren;\n    React.useEffect(function () {\n        var clickListener = function (e) {\n            if (e.target.hasAttribute('data-fullscreen-group')) {\n                dispatch({\n                    type: ImageGroup.actions.toggleCloseAnimate,\n                });\n            }\n        };\n        var keyDownListener = function (e) {\n            if (state.currentFocusedImageIndex !== -1) {\n                if (e.key === 'Escape') {\n                    dispatch({\n                        type: ImageGroup.actions.toggleCloseAnimate,\n                    });\n                }\n                if (e.key === 'ArrowRight') {\n                    if (nextImageButton.current)\n                        nextImageButton.current.focus();\n                    if (state.currentFocusedImageIndex + 1 === numberOfImageChildren) {\n                        dispatch({\n                            type: ImageGroup.actions.toggleExpand,\n                            payload: {\n                                id: 0,\n                            },\n                        });\n                    }\n                    else {\n                        dispatch({\n                            type: ImageGroup.actions.toggleExpand,\n                            payload: {\n                                id: state.currentFocusedImageIndex + 1,\n                            },\n                        });\n                    }\n                }\n                if (e.key === 'ArrowLeft') {\n                    if (previousImageButton.current)\n                        previousImageButton.current.focus();\n                    if (state.currentFocusedImageIndex - 1 === -1) {\n                        dispatch({\n                            type: ImageGroup.actions.toggleExpand,\n                            payload: {\n                                id: numberOfImageChildren - 1,\n                            },\n                        });\n                    }\n                    else {\n                        dispatch({\n                            type: ImageGroup.actions.toggleExpand,\n                            payload: {\n                                id: state.currentFocusedImageIndex - 1,\n                            },\n                        });\n                    }\n                }\n            }\n        };\n        var resizeListener = function () {\n            dispatch({\n                type: ImageGroup.actions.toggleCloseAnimate,\n            });\n            window.removeEventListener('resize', resizeListener);\n        };\n        var scrollAnimationId = -1;\n        var initialOffset = 0;\n        var scrollListener = function () {\n            scrollAnimationId = requestAnimationFrame(scrollListener);\n            var difference = Math.abs(initialOffset - window.pageYOffset);\n            if (difference > 80) {\n                dispatch({\n                    type: ImageGroup.actions.toggleCloseAnimate,\n                });\n            }\n        };\n        if (state.isImageGroupExpanded) {\n            window.addEventListener(clickEvent, clickListener);\n            window.addEventListener('keydown', keyDownListener);\n            window.addEventListener('resize', resizeListener);\n            initialOffset = window.pageYOffset;\n            scrollAnimationId = requestAnimationFrame(scrollListener);\n        }\n        else {\n            window.removeEventListener(clickEvent, clickListener);\n            window.removeEventListener('keydown', keyDownListener);\n            window.removeEventListener('resize', resizeListener);\n            cancelAnimationFrame(scrollAnimationId);\n        }\n        return function () {\n            window.removeEventListener(clickEvent, clickListener);\n            window.removeEventListener('keydown', keyDownListener);\n            window.removeEventListener('resize', resizeListener);\n            cancelAnimationFrame(scrollAnimationId);\n        };\n    }, [\n        state.isImageGroupExpanded,\n        numberOfImageChildren,\n        state.currentFocusedImageIndex,\n    ]);\n    return (React.createElement(\"div\", { \"data-fullscreen-group\": \"\", className: \"fullscreen-group\" + (state.isImageGroupExpanded ? ' fullscreen-group--expanded' : ''), style: {\n            transition: \"opacity \" + transitionMs + \"ms ease\",\n        } },\n        updatedChildren,\n        state.currentFocusedImageIndex !== -1 && (React.createElement(React.Fragment, null,\n            React.createElement(\"button\", { className: \"fullscreen-exit-btn\", onClick: function () {\n                    dispatch({\n                        type: ImageGroup.actions.toggleCloseAnimate,\n                    });\n                }, \"aria-label\": \"Close fullscreen view\" },\n                React.createElement(ExitIcon, null)),\n            React.createElement(\"button\", { ref: previousImageButton, className: \"fullscreen-toggle toggle--left\", onClick: function () {\n                    dispatch({\n                        type: ImageGroup.actions.toggleExpand,\n                        payload: {\n                            id: state.currentFocusedImageIndex - 1 !== -1\n                                ? state.currentFocusedImageIndex - 1\n                                : numberOfImageChildren - 1,\n                        },\n                    });\n                }, tabIndex: state.isImageGroupExpanded ? 0 : -1, \"aria-label\": \"Show previous photo\" },\n                React.createElement(Arrow, { direction: \"left\" })),\n            React.createElement(\"button\", { ref: nextImageButton, className: \"fullscreen-toggle toggle--right\", onClick: function () {\n                    dispatch({\n                        type: ImageGroup.actions.toggleExpand,\n                        payload: {\n                            id: state.currentFocusedImageIndex + 1 !== numberOfImageChildren\n                                ? state.currentFocusedImageIndex + 1\n                                : 0,\n                        },\n                    });\n                }, tabIndex: state.isImageGroupExpanded ? 0 : -1, \"aria-label\": \"Show next photo\" },\n                React.createElement(Arrow, { direction: \"right\" }))))));\n}\nImageGroup.actions = {\n    toggleExpand: 'TOGGLE_EXPAND',\n    toggleExpandAnimate: 'TOGGLE_EXPAND_ANIMATE',\n    toggleCloseAnimate: 'TOGGLE_CLOSE_ANIMATE',\n};\nexport function Image(_a) {\n    var src = _a.src, alt = _a.alt, style = _a.style, props = __rest(_a, [\"src\", \"alt\", \"style\"]);\n    var onClick = props.onClick, isFocused = props.isFocused, shouldAnimate = props.shouldAnimate, isImageGroupExpanded = props.isImageGroupExpanded, transitionMs = props.transitionMs, rest = __rest(props, [\"onClick\", \"isFocused\", \"shouldAnimate\", \"isImageGroupExpanded\", \"transitionMs\"]);\n    var scalingImage = React.useRef(null);\n    var wasPreviouslyFocused = React.useRef(false);\n    var initialRender = React.useRef(false);\n    React.useEffect(function () {\n        if (!initialRender.current) {\n            initialRender.current = true;\n            return;\n        }\n        var element = scalingImage.current;\n        if (element) {\n            if (isFocused) {\n                if (shouldAnimate) {\n                    calculatePosition('open')(element, transitionMs);\n                }\n                else {\n                    calculatePosition('open')(element, 0);\n                }\n                wasPreviouslyFocused.current = true;\n            }\n            if (!isFocused && wasPreviouslyFocused.current) {\n                if (shouldAnimate) {\n                    calculatePosition('close')(element, transitionMs);\n                }\n                else {\n                    calculatePosition('close')(element, 0);\n                }\n                wasPreviouslyFocused.current = false;\n            }\n        }\n    }, [isFocused, shouldAnimate, transitionMs]);\n    return (React.createElement(\"div\", __assign({ className: \"fullscreen-container\" }, rest),\n        React.createElement(\"button\", { className: \"fullscreen-btn\", onClick: onClick, tabIndex: isFocused || !isImageGroupExpanded ? 0 : -1 },\n            React.createElement(\"div\", { className: \"fullscreen-image\" },\n                React.createElement(\"img\", { src: src, alt: alt, style: style })),\n            React.createElement(\"div\", { ref: scalingImage, className: \"fullscreen-image\" },\n                React.createElement(\"img\", { src: src, alt: alt, style: style })))));\n}\nImage.displayName = 'Image';\nfunction mapPropsToChildren(children, fnToApplyToChild) {\n    var numberOfImageChildren = 0;\n    var recursiveMap = function (children) {\n        return React.Children.map(children, function (child) {\n            if (!React.isValidElement(child)) {\n                return child;\n            }\n            if (child.type.displayName === Image.displayName) {\n                child = fnToApplyToChild(child, numberOfImageChildren);\n                numberOfImageChildren++;\n                return child;\n            }\n            if (child.props.children) {\n                child = React.cloneElement(child, {\n                    children: recursiveMap(child.props.children),\n                });\n            }\n            return child;\n        });\n    };\n    var updatedChildren = recursiveMap(children);\n    return {\n        updatedChildren: updatedChildren,\n        numberOfImageChildren: numberOfImageChildren,\n    };\n}\nfunction calculatePosition(action) {\n    return function calculate(el, transitionMs) {\n        if (transitionMs === void 0) { transitionMs = 0; }\n        if (action === 'open') {\n            var innerWidth_1 = window.innerWidth, innerHeight_1 = window.innerHeight;\n            var _a = el.getBoundingClientRect(), height = _a.height, width = _a.width, top_1 = _a.top, left = _a.left;\n            var scaleBy = innerWidth_1 < innerHeight_1 ? 'width' : 'height';\n            var scale = scaleBy === 'width' ? innerWidth_1 / width : innerHeight_1 / height;\n            var scaledImageWidth = width * scale;\n            var leftOfWhereScaledImageNeedsToBe = innerWidth_1 / 2 - scaledImageWidth / 2;\n            var leftOfWhereScaledImageIs = left - (scaledImageWidth - width) / 2;\n            var translateX = (leftOfWhereScaledImageNeedsToBe - leftOfWhereScaledImageIs) / scale;\n            var translateY = 0;\n            if (scaleBy === 'width') {\n                var scaledImageHeight = height * scale;\n                var centerOfScreen = innerHeight_1 / 2;\n                var topOfWhereImageShouldBe = centerOfScreen - scaledImageHeight / 2;\n                translateY = (topOfWhereImageShouldBe - top_1) / scale;\n            }\n            else {\n                translateY = (top_1 / scale) * -1;\n            }\n            el.style.opacity = '1';\n            el.style.transform = \"scale(\" + scale + \") translate3d(\" + translateX + \"px, \" + translateY + \"px, 0px)\";\n            el.style.transition = \"transform \" + transitionMs + \"ms ease, opacity 0ms\";\n            el.style.transformOrigin = '50% 0';\n            el.style.zIndex = '9';\n            el.style.pointerEvents = 'initial';\n            el.style.touchAction = 'initial';\n            return;\n        }\n        if (action === 'close') {\n            el.style.opacity = '0';\n            el.style.transform = \"scale(1) translate3d(0px, 0px, 0px)\";\n            el.style.transition = \"transform \" + transitionMs + \"ms ease, opacity 0ms ease \" + transitionMs + \"ms, z-index 0ms ease \" + transitionMs + \"ms\";\n            el.style.transformOrigin = '50% 0';\n            el.style.zIndex = '-1';\n            el.style.pointerEvents = 'none';\n            el.style.touchAction = 'none';\n            return;\n        }\n    };\n}\nfunction isMobile() {\n    if (typeof document !== \"undefined\") {\n        return 'ontouchstart' in document.documentElement === true;\n    }\n    return false;\n}\nfunction Arrow(_a) {\n    var _b = _a.direction, direction = _b === void 0 ? 'right' : _b;\n    return direction === 'right' ? (React.createElement(\"svg\", { width: \"20\", height: \"34\", xmlns: \"http://www.w3.org/2000/svg\" },\n        React.createElement(\"path\", { d: \"M18.3523845 18.5841646L4.77482194 32.343229c-.86369698.8756947-2.26403359.8756947-3.12731127 0-.86334756-.8749156-.86334756-2.2939446 0-3.1687894L13.6615574 16.9997698 1.6478601 4.82552501c-.86334757-.87526972-.86334757-2.29415709 0-3.16907271.86334755-.87526973 2.26361428-.87526973 3.12731126 0L18.3527339 15.4157292C18.7844077 15.8533995 19 16.4264076 19 16.999699c0 .5735747-.2160116 1.1470077-.6476155 1.5844656z\", fillRule: \"nonzero\", stroke: \"#000\", fill: \"#fff\" }))) : (React.createElement(\"svg\", { width: \"20\", height: \"34\", xmlns: \"http://www.w3.org/2000/svg\" },\n        React.createElement(\"path\", { d: \"M1.6476155 18.5841646L15.22517806 32.343229c.86369698.8756947 2.26403359.8756947 3.12731127 0 .86334756-.8749156.86334756-2.2939446 0-3.1687894L6.3384426 16.9997698 18.3521399 4.82552501c.86334757-.87526972.86334757-2.29415709 0-3.16907271-.86334755-.87526973-2.26361428-.87526973-3.12731126 0L1.6472661 15.4157292C1.2155923 15.8533995 1 16.4264076 1 16.999699c0 .5735747.2160116 1.1470077.6476155 1.5844656z\", fillRule: \"nonzero\", stroke: \"#000\", fill: \"#fff\" })));\n}\nfunction ExitIcon() {\n    return (React.createElement(\"svg\", { width: \"20\", height: \"20\", xmlns: \"http://www.w3.org/2000/svg\" },\n        React.createElement(\"g\", { fill: \"#000\", fillRule: \"nonzero\", stroke: \"#000\" },\n            React.createElement(\"path\", { d: \"M18.6753571 2.08152486l-.6487597-.67476795c-.3578377-.37260221-.9393896-.37260221-1.2979286 0L9.98071429 8.33578453 3.21534416 1.30137569c-.35848052-.37254144-.93974026-.37254144-1.29792858 0l-.64875974.6746464c-.3581883.37272377-.3581883.97644752 0 1.34923205l8.055 8.37634806c.35818832.3729061.93898052.3729061 1.29757793 0l8.05412333-8.27102761c.359065-.37254144.359065-.97650829 0-1.34904973z\" }),\n            React.createElement(\"path\", { d: \"M18.6753571 17.91847514l-.6487597.67476795c-.3578377.37260221-.9393896.37260221-1.2979286 0l-6.74795451-6.92902762-6.76537013 7.03440884c-.35848052.37254144-.93974026.37254144-1.29792858 0l-.64875974-.6746464c-.3581883-.37272377-.3581883-.97644752 0-1.34923205l8.055-8.37634806c.35818832-.3729061.93898052-.3729061 1.29757793 0l8.05412333 8.27102761c.359065.37254144.359065.97650829 0 1.34904973z\" }))));\n}\n//# sourceMappingURL=fullscreen.js.map"]},"metadata":{},"sourceType":"module"}